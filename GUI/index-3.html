<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>CSC3007 Information Visualization</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <!-- <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  

  <!-- Variables CSS Files. Uncomment your preferred color scheme -->
  <link href="assets/css/variables.css" rel="stylesheet">
  <!-- <link href="assets/css/variables-blue.css" rel="stylesheet"> -->
  <!-- <link href="assets/css/variables-green.css" rel="stylesheet"> -->
  <!-- <link href="assets/css/variables-orange.css" rel="stylesheet"> -->
  <!-- <link href="assets/css/variables-purple.css" rel="stylesheet"> -->
  <!-- <link href="assets/css/variables-red.css" rel="stylesheet"> -->
  <!-- <link href="assets/css/variables-pink.css" rel="stylesheet"> -->

  <!-- Template Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- Loading d3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
  <!-- <script src="bootstrap/js/bootstrap-tooltip.js"></script> -->

  <!-- =======================================================
  * Template Name: HeroBiz - v2.2.0
  * Template URL: https://bootstrapmade.com/herobiz-bootstrap-business-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->

  <style>
    .tooltip {
      margin-left: 60px;
      margin-right: 60px;
    }

    .html {
      
      padding-left: 5px;
      padding-top: 5px;
      font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      font-size: 15px;
      
    }
  </style>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top" data-scrollto-offset="0">
    <div class="container-fluid d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center scrollto me-auto me-lg-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>CSC3007 Information Visualization<span>.</span></h1>
      </a>

      <nav id="navbar" class="navbar">
        <ul>

          <li class="dropdown"><a href="#"><span>Home</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
            <ul>
              <li><a href="index.html">Home </a></li>
              <li><a href="index-2.html">Milestone 1</a></li>
              <li><a href="index-3.html">Milestone 2</a></li>
            </ul>
          </li>

          <li><a class="nav-link scrollto" href="index-2.html">Milestone 1</a></li>
          <li><a class="nav-link scrollto" href="index-3.html">Milestone 2</a></li>


          <i class="bi bi-list mobile-nav-toggle d-none"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <section id="hero-animated" class="hero-animated d-flex align-items-center">
    <div class="container d-flex flex-column justify-content-center align-items-center text-center position-relative"
      data-aos="zoom-out">
      <div>
        <h2 style="align-items:center;"><span>Milestone 2</span></h2><br>
      <!-- Main graph display -->
      <h1>Singapore Carpark Lots Availability During Circuit Breaker</H1>
      <h3>Circuit Breaker from: 07 Apr 2020 - 01 Jun 2020</h3>
      <div id="my_dataviz" style="align-self: center;"></div>
      </div>
    </div>
  </section>


    <script>

      // Set the dimensions and margins of the graph
      const margin = { top: 0, right: 25, bottom: 30, left: 60 },
          width = 1750 - margin.left - margin.right,
          height = 450 - margin.top - margin.bottom;

      // Append the svg object to the body of the page
      const svg = d3.select("#my_dataviz")
          .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom + 100)
          .attr("viewBox", "0 0 1900 800")
          .append("g")
          .attr("transform", `translate(${margin.left}, ${margin.top})`);

      // Read the data
      d3.csv("../milestone-2/D3 Heatmap/ParkingData.csv").then(function (data) {

          // Labels of row and columns -> unique identifier of the column called 'week' and 'hour'
          const myGroups = Array.from(new Set(data.map(d => d.week)))
          const myVars = Array.from(new Set(data.map(d => d.hour)))

          // Build X scales and axis:
          const x = d3.scaleBand()
              .range([0, width])
              .domain(myGroups)
              .padding(0.05);
          svg.append("g")
              .style("font-size", 15)
              .attr("transform", `translate(0, ${height})`)
              .call(d3.axisBottom(x).tickSize(0))
              .select(".domain").remove()


          // Build Y scales and axis:
          const y = d3.scaleBand()
              .range([height, 0])
              .domain(myVars)
              .padding(0.05);
          svg.append("g")
              .style("font-size", 15)
              .call(d3.axisLeft(y).tickSize(0))
              .select(".domain").remove()

          // Build color scale
          const myColor = d3.scaleLinear()
              .range(["navyblue", "blue", "skyblue"])
              .domain([1500000, 2500000, 3000000])

          // Set the legend for the colorscale
          var legend = d3
              .legendColor()
              .scale(myColor)
              .shapeWidth(325)
              .labels(function (d) { return myColor(d.generatedLabels); })
              .orient("horizontal");

          svg.append("g").attr("transform", "translate(20,480)").call(legend);

          // Create a tooltip
          const tooltip = d3.select("#my_dataviz")
              .append("div")
              .style("opacity", 0)
              .attr("class", "tooltip")
              .style("background-color", "white")
              .style("border", "solid")
              .style("border-width", "2px")
              .style("border-radius", "5px")
              .style("padding", "5px")

          // Add the squares
          svg.selectAll()
              .data(data, function (d) { return d.week + ':' + d.hour; })
              .enter()
              .append("rect")
              .attr("x", function (d) { return x(d.week) })
              .attr("y", function (d) { return y(d.hour) })
              .attr("rx", 4)
              .attr("ry", 4)
              .attr("width", x.bandwidth())
              .attr("height", y.bandwidth())
              .style("fill", function (d) { return myColor(d.value) })
              .style("stroke-width", 4)
              .style("stroke", "none")
              .style("opacity", 0.8)
              .on("mouseover", (event, d) => {
                  d3.select(".tooltip")
                      .style("opacity", 2)
                      .style("position", "absolute")
                      .style("background", "#fff")
                      .html("<b>Total Available Lots: </b>" + d.value  +  '<br>' + "<b>Percentage of Available Lots: </b>" + d.Percentage)
                      .style("left", (event.x)  + "px")
                      .style("top", (event.y) + "px");

                  d3.select(event.currentTarget)
                      .style("stroke", "black")
                      .style("stroke-width", 2)
                      .style("opacity", 2)
                      .classed("selected", true);
              })

              .on("mouseout", (event, d) => {
                  d3.select(".tooltip")
                      .style("opacity", 0);

                  d3.select(event.currentTarget)
                      .style("stroke", "none")
                      .style("opacity", 0.8)
                      .classed("selected", false);
              })
      })

  </script>
  

  <main id="main">
    <!-- ======= About Visualization Section ======= -->
    <section id="aboutviz" class="aboutviz">
      <div class="container" data-aos="fade-up">

        <div class="section-header">
          <h2>About the Visualization</h2>
          <p>This Visualization is an improved version of the <a href="https://ual.sg/post/2020/04/12/singapores-urban-data-affirms-the-compliance-with-the-circuit-breaker-measures/">visualization</a> we have critiqued in Milestone 1. The visualization we had 
          chosen to do is a Heatmap using the D3 library, to enable users to visualize the availability of HDB carparks lots for cars during the period from April 2019 to July 2019.
          This visualization is used to show the effect that the Covid-19 Pandemic had to Singapore Roads and how it affected traffic. 
          </p>
        </div>

      </div>
    </section> <!-- End About Visualization Section -->


    <!-- ======= Data Section ======= -->
    <section id="data" class="data" data-aos="fade-up">
      <div class="container">
        <div class="section-header">
          <h2>Data</h2>
          <p>As explained from Milestone 1, there is no publicly available dataset on Road Traffic in Singapore, such as the number of cars on the Road. 
            Singapore Land Transport Authority (LTA) provides a dataset to view real time travel times across Singapore, and may suggest the number of cars 
            on the road. However, the API does not allow for querying for historical data, therefore we are unable to retrieve past trends. <br><br>
            Therefore, we have followed the same dataset that was used in Milestone 1. In the absence of better data, carpark availability was used, 
            as a reasonable substitute to measure movement of people by car, since it makes movement suggestions that are reasonably accurate in order to 
            obtain a clear picture of movements by car. To focus on the residential aspect, only HDB carparks were considered.
            
            Since the API only allows for calls for a specific date and time, we had to conduct data cleaning using the data pulled from the 
            <a href="https://data.gov.sg/dataset/carpark-availability">Carpark Availability API</a> from Data.gov.sg developer resources. 
          </p>
        </div>
      </div>
      </section> <!-- End Data Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="footer-legal text-center">
      <div
        class="container d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center">
        <div class="d-flex flex-column align-items-center align-items-lg-start">
          <div class="copyright">
            &copy; Copyright <strong><span>Team 03</span></strong>. All Rights Reserved
          </div>
      </div>
    </div>

  </footer><!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>

</html>