<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>CSC3007 Information Visualization</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/2472283.png" rel="icon">
  <link href="assets/img/2472283.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <!-- <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Variables CSS Files. Uncomment your preferred color scheme -->
  <link href="assets/css/variables.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- Loading d3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>

  <script src="https://momentjs.com/downloads/moment.js"></script>

  <style>
    .html {
      padding-left: 5px;
      padding-top: 5px;
      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      font-size: 15px;

    }

    .tooltip {
      position: absolute;
    }

    table {
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      border-collapse: collapse;
      width: 100%;
      border: 1px solid
    }

    td {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }

    th {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
      background-color: lightblue;
    }

    .bar--positive {
      fill: steelblue;
    }

    .bar--negative {
      fill: red;
    }
  </style>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top" data-scrollto-offset="0">
    <div class="container-fluid d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center scrollto me-auto me-lg-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>CSC3007 Information Visualization<span>.</span></h1>
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto" href="index.html">Home</a></li>
          <li><a class="nav-link scrollto" href="index-4.html">Documentation</a></li>
          <li class="dropdown"><a href="#"><span>Milestone 1</span> <i
                class="bi bi-chevron-down dropdown-indicator"></i></a>
            <ul>
              <li><a href="index-2.html">Visualization Chart 1</a></li>
              <li><a href="index-2-1.html">Visualization Chart 2</a></li>
            </ul>
          </li>
          <li><a class="nav-link scrollto" href="index-3.html">Milestone 2</a></li>
          <i class="bi bi-list mobile-nav-toggle d-none"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <section id="hero-animated" class="hero-animated d-flex align-items-center">
    <div class="container d-flex flex-column justify-content-center align-items-center text-center position-relative"
      data-aos="zoom-out">
      <div>
        <h2 style="align-items:center;"><span>Milestone 2</span></h2><br>
        <!-- Main graph display -->
        <h1>Singapore Carpark Lots Availability During the Pandemic</H1>
        <h3>Circuit Breaker from: 07 Apr 2020 - 01 Jun 2020</h3>
        <div id="my_dataviz" style="align-self: center;"></div>
        <br>
        <h1>Singapore Flights and Hotels Search During the Pandemic</H1>
        <h3>Circuit Breaker from: 07 Apr 2020 - 01 Jun 2020</h3>
        <div id="my_linechart" style="align-self: center;"></div>
        <br>
        <h1>Singapore GDP During the Years of COVID-19</H1>
        <div id="my_barchart" style="align-self: center;"></div>
      </div>
    </div>
  </section>

  <main id="main">
    <!-- ======= Background Section ======= -->
    <section id="background" class="background">
      <div class="container" data-aos="fade-up">
        <div class="section-header">
          <h2>Background</h2>
          <p>In response to COVID-19, the news and social media deliver myriad visualizations about not only the
            progression of the pandemic, but also how measures taken to mitigate it have affected daily life and the
            country economy.
            Following the major lockdown in Singapore in year 2020, many individuals had to greatly adjust their working
            lifestyle to a home-based working environment instead of working in an
            office. Consequently, traffic will also be greatly reduced since people will mostly remain at home most of
            the time and only leave their homes to purchase essential items. Essentially, the three visualizations above
            provides insights on
            the effect of COVID-19 on the Singapore economy (GDP) and the daily life of the people, through inferences
            made from traffic
            and data of flight and hotel searches.
          </p>
        </div>
      </div>
    </section>
    <!-- End Background Section -->

    <!-- ======= Features Section ======= -->
    <section id="features" class="features">
      <div class="container" data-aos="fade-up">

        <ul class="nav nav-tabs row gy-4 d-flex">

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link active show" data-bs-toggle="tab" data-bs-target="#tab-1">
              <i class="bi bi-binoculars color-cyan"></i>
              <h4>The Visualization</h4>
            </a>
          </li><!-- End Tab 1 Nav -->

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-2">
              <i class="bi bi-box-seam color-indigo"></i>
              <h4>Dataset</h4>
            </a>
          </li><!-- End Tab 2 Nav -->

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-3">
              <i class="bi bi-brightness-high color-teal"></i>
              <h4>Improvements</h4>
            </a>
          </li><!-- End Tab 3 Nav -->

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-4">
              <i class="bi bi-command color-red"></i>
              <h4>What-Why-How</h4>
            </a>
          </li><!-- End Tab 4 Nav -->

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-5">
              <i class="bi bi-easel color-blue"></i>
              <h4>Challenges</h4>
            </a>
          </li><!-- End Tab 5 Nav -->

          <li class="nav-item col-6 col-md-4 col-lg-2">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-6">
              <i class="bi bi-map color-orange"></i>
              <h4>Future Work</h4>
            </a>
          </li><!-- End Tab 6 Nav -->

        </ul>

        <div class="tab-content">
          <div class="tab-pane active show" id="tab-1">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1" data-aos="fade-up" data-aos-delay="100">
                <h3>Visualization</h3>
                <p class="fst-italic">
                  <b>Technologies used</b>: D3 Library, Bootstrap
                </p>
                <p>This visualization is an improved version of the <a
                    href="https://ual.sg/post/2020/04/12/singapores-urban-data-affirms-the-compliance-with-the-circuit-breaker-measures/">visualization</a>
                  we have critiqued in <a href="index-2.html">Milestone 1</a>. The visualization we have chosen to do is
                  a Heatmap using the D3 library, to enable users to visualize the availability of HDB carparks lots for
                  cars during the period from April 2020 to July 2020. This visualization is used to show the effect
                  that the COVID-19 pandemic had to Singapore Roads and how it affected traffic. We have used HDB car
                  lots availability as a indication of road traffic. It is assumed that the higher the number of
                  available lots, there is more traffic on the road.<br><br>
                  Additionally, we have also created two more sets of charts (line and bar charts) to explain the flow
                  of the storyline. A line chart is shown in order to illustrate the utilization of
                  Singapore Flights and Hotels during the COVID-19 pandemic, which is consistent with the Circuit
                  Breaker period starting. While the bar chart illustrates that economic growth in Singapore has been
                  subjected to "fits and starts" since the beginning of the year, as successive waves of infections have
                  led to movement restrictions being imposed and then lifted.
                </p>
                <ul>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center" data-aos="fade-up" data-aos-delay="200">
                <img src="assets/img/infographic.png" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 1 -->

          <div class="tab-pane" id="tab-2">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1">
                <h3>Dataset</h3>
                <br>
                <!-- Tabs -->
                <ul class="nav nav-pills mb-3">
                  <li><a class="nav-link active" data-bs-toggle="pill" href="#tab1">Carpark Availability</a></li>
                  <li><a class="nav-link" data-bs-toggle="pill" href="#tab2">Singapore Flights and Hotels Search</a>
                  </li>
                  <li><a class="nav-link" data-bs-toggle="pill" href="#tab3">Singapore GDP</a></li>
                </ul><!-- End Tabs -->

                <!-- Tab Content -->
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="tab1">
                    <p>As explained from Milestone 1, there is no publicly available dataset on road traffic in
                      Singapore, such as the number of cars on the road. Singapore Land Transport Authority (LTA)
                      provides a dataset to view real time travel times across
                      Singapore, and may suggest the number of cars on the road. However, the API does not allow for
                      querying for historical data, therefore we are
                      unable to retrieve past trends. <br><br>
                      Therefore, we have followed the same dataset that was used in Milestone 1. In the absence of
                      better data, carpark availability was used, as a reasonable substitute to measure movement of
                      people by car, since it makes movement
                      suggestions that are reasonably accurate in order to obtain a clear picture of movements by car.
                      To focus on the residential aspect, only HDB carparks
                      were considered. Since the API only allows for calls for a specific date and time, we had to
                      conduct data cleaning using the data pulled from the <a
                        href="https://data.gov.sg/dataset/carpark-availability">Carpark Availability API</a>
                      from Data.gov.sg developer resources.
                    </p>
                    <ul>
                      <li><i class="bi bi-check-circle-fill"></i> Queried the API for dates and time in range</li>
                      <li><i class="bi bi-check-circle-fill"></i> Cleaned the data from API and only kept useful
                        information</li>
                      <li><i class="bi bi-check-circle-fill"></i> Stored and sorted in CSV format</li>
                    </ul>
                  </div>
                  <div class="tab-pane" id="tab2">
                    <p>In the previous dataset, we looked at carpark availability, which determined movement by car.
                      Now, we have a newly discovered dataset from
                      <a
                        href="https://trends.google.com/trends/explore?date=2020-03-01%202020-06-30&geo=SG&q=singapore%20flights">Google
                        Trends</a>
                      regarding Singapore flights and hotel searches within the aviation and tourism industry
                      respectively. The pandemic is not only distrupting people's
                      lives, but it is also having a huge impact on businesses such as tourism, where tourists and local
                      alike have been unable to travel for leisure or work reasons due to the major lockdown in
                      Singapore and restrictions set by the government.
                    </p>
                    <ul>
                      <li><i class="bi bi-check-circle-fill"></i> Solely focused on Singapore flights and hotels
                        frequency</li>
                      <li><i class="bi bi-check-circle-fill"></i> Process the data with formatting the date range to be
                        readable and only kept useful information</li>
                      <li><i class="bi bi-check-circle-fill"></i> Originated from Google Trends and downloaded the
                        dataset in CSV format</li>
                    </ul>
                  </div>
                  <div class="tab-pane" id="tab3">
                    <p>The overall Gross Domestic Progression (GDP) profile flattened in Q2 and Q3 because of
                      distruptions in certain sectors. The
                      pullback in activity, however, was not as severe as during the circuit breaker period in Q2 2020,
                      as regulations then were more relaxed, so firms adapted to some extent, pivoting to alternative
                      methods of doing business with public health measures changing. Further, some external-facing
                      sectors provided support, which helped offset the weakness in the sectors most affected by
                      restrictions.
                    </p>
                    <ul>
                      <li><i class="bi bi-check-circle-fill"></i>Retrieved the dataset from the World Bank website where we looked at <a
                          href="https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG?end=2021&locations=SG&start=2016&view=chart&year=2021">The
                          annual growth of Singapore in Percentage</a> and <a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD?end=2021&locations=SG&start=2016"> 
                          The annual growth of Singapore in USD ($)</a>downloaded the dataset in CSV format</li>
                      <li><i class="bi bi-check-circle-fill"></i> Data had to be cleaned and collated into one CSV file as althought it was only showing the data of singapore on the website
                      but when the data is downloaded the data has the world's GDP therefore there was a need to clean the data.</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center">
                <img src="assets/img/csv.png" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 2 -->

          <div class="tab-pane" id="tab-3">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1">
                <h3>Improvements Made</h3>
                <p>In the initial visualization, it was static and did not allow for any interaction. We have added
                  interaction into the visualization by adding a tooltip and mouseover functionalities.
                  Previously, we were unable to understand the data shown from the visualization, therefore we have
                  decided to compile the data and make it visible for the users, so that they can better understand
                  the trends or patterns in the visualization. To add on, we have also changed the color scale that
                  was previously misleading. A darker or more intense shade of blue is used to denote higher occupancy
                  in the day, at a specific timing.
                </p>
                <ul>
                  <li><i class="bi bi-check-circle-fill"></i>Added interactivity (tooltip and mousehover
                    functionalities)</li>
                  <li><i class="bi bi-check-circle-fill"></i>Changed the colour scale and added a legend</li>
                  <li><i class="bi bi-check-circle-fill"></i>Added x y scale value for better understanding of the
                    visualization</li>
                  <li><i class="bi bi-check-circle-fill"></i>Compiled and provided data from API</li>
                </ul>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center">
                <img src="assets/img/improvement.png" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 3 -->

          <div class="tab-pane" id="tab-4">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1">
                <h3>What Why How</h3>
                <br>
                <p class="fst-italic">
                  <b>What</b>
                </p>
                <p>
                  We have used HDB car lots availability as a indication of road traffic. It is assumed that the
                  higher
                  the value of available lots, there is
                  more traffic on the road.
                </p>
                <ul>
                  <li><i class="bi bi-check-circle-fill"></i> Total number of HDB parking lots in each individual
                    HDB
                    parking</li>
                  <li><i class="bi bi-check-circle-fill"></i> Total number of occupied lots in individual HDB
                    parking
                  </li>
                  <li><i class="bi bi-check-circle-fill"></i> Type of lots at each individual carpark and their
                    carpark
                    code</li>
                  <li><i class="bi bi-check-circle-fill"></i> Specific Date and Time</li>
                </ul>
                <br>
                <p class="fst-italic">
                  <b>Why</b>
                </p>
                <p>
                  This visualization is done as an explanatory purpose to show the effect that the COVID-19
                  pandemic had to Singapore Roads and how it affected traffic. We have used HDB car lots
                  availability
                  as a indication of road traffic. It is assumed that the higer the value of available lots, there
                  is
                  more traffic on the road. We also used a tooltip to show a more indepth each square's value and
                  percentage of the total available
                  and occupied lots in Singapore.
                </p>
                <br>
                <p class="fst-italic">
                  <b>How</b>
                </p>
                <p>
                  The visualization chosen is a Heatmap that utilized D3 library, to enable users to visualize
                  the availability of HDB carparks lots for cars during the period from April 2020 to July 2020. By
                  using the amomunt of occupancy in the carparks, the heatmap would display a darker color to
                  represent
                  a higher number of lot occupancy
                  and lighter color as lower number of lot occupancy. With a tooltip that would also show the total
                  number of available lots,
                  percentage of available lots and the percentage of occupied lots.
                </p>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center">
                <img src="assets/img/why-how-what.png" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 4 -->

          <div class="tab-pane" id="tab-5">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1">
                <h3>Challenges Faced</h3>
                <p>
                  There were some challenges faced by the team during the process of implementing improved version
                  of <a
                    href="https://ual.sg/post/2020/04/12/singapores-urban-data-affirms-the-compliance-with-the-circuit-breaker-measures/">visualization</a>
                  that had been critiqued in <a href="index-2.html">Milestone 1</a> and are listed below:
                </p>
                <ul>
                  <li><i class="bi bi-check-circle-fill"></i>Working with the API data</li>
                  <li><i class="bi bi-check-circle-fill"></i>Cleaning and sorting the retrieved API data </li>
                  <li><i class="bi bi-check-circle-fill"></i>Rethinking the process of how to enable users to
                    understand
                    the story that we want to convey through the visualization chart</li>
                  <li><i class="bi bi-check-circle-fill"></i>Some functionalities of the D3 library clashes with the
                    Bootstrap library</li>
                  <li><i class="bi bi-check-circle-fill"></i>No specific dataset that depicts the mobility volumes
                    during the COVID-19 period. Alternatively, the team had tried to
                    source for similar datasets (such as <a href="https://covid19.apple.com/mobility">COVID-19 -
                      Mobility Trends - Apple</a> and <a
                      href="https://citymapper.com/news/2393/citymapper-mobility-index-comes-to-an-end">Citymapper
                      Mobility Index</a>)
                    but they no longer provide access to the data.</li>
                </ul>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center">
                <img src="assets/img/challenge.png" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 5 -->

          <div class="tab-pane" id="tab-6">
            <div class="row gy-4">
              <div class="col-lg-8 order-2 order-lg-1">
                <h3>Future Work</h3>
                <p>
                  In light of this, the team has came to a conclusion and makes the following suggestions to enhance
                  the
                  improved version of the visualization chart:
                </p>
                <ul>
                  <li><i class="bi bi-check-circle-fill"></i> It may have an expandable feature within each square
                    that
                    the viewer can expand to view a more detailed
                    description of the daily availability of carpark lots at specific timings (e.g., 9am, 12pm,
                    etc.)
                    within the week.
                  </li>
                  <li><i class="bi bi-check-circle-fill"></i> As an extension of the previous point, it is
                    preferable to
                    have a line or bar chart in that expanded page to represent the additional data.
                  </li>
                </ul>
              </div>
              <div class="col-lg-4 order-1 order-lg-2 text-center">
                <img src="assets/img/lightbulb.JPG" alt="" class="img-fluid">
              </div>
            </div>
          </div><!-- End Tab Content 6 -->

        </div>

      </div>
    </section><!-- End Features Section -->

    <!-- ======= Team Contribution Section ======= -->
    <section id="team" class="team">
      <div class="container" data-aos="fade-up">

        <div class="section-header">
          <h2>Team Contribution</h2>

          <table>
            <tr>
              <th>Student Name</th>
              <th>Student ID</th>
              <th>Task Description</th>
            </tr>
            <tr>
              <td>Aloysius Chia Mu Rong</td>
              <td>1900640</td>
              <td>Data Cleaning<br>
                Code (Bar Chart)<br>
                Documentation
              </td>
            </tr>
            <tr>
              <td>Angela Lui An Chi</td>
              <td>1901852</td>
              <td>Data Cleaning<br>
                Code (Line Chart)<br>
                Documentation
              </td>
            </tr>
            <tr>
              <td>Khloe Lim Xin Hui</td>
              <td>1901865</td>
              <td>Data Cleaning<br>
                Code (Heatmap)<br>
                Documentation
              </td>
            </tr>
          </table>
        </div>
      </div>
    </section>
    <!-- End Team Contribution Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="footer-legal text-center">
      <div
        class="container d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center">
        <div class="d-flex flex-column align-items-center align-items-lg-start">
          <div class="copyright">
            &copy; Copyright <strong><span>Team 03</span></strong>. All Rights Reserved
          </div>
        </div>
      </div>

  </footer><!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

  <script>

    // Set the dimensions and margins of the heatmap graph
    const margin = { top: 25, right: -100, bottom: -10, left: 60 },
      width = 1750 - margin.left - margin.right,
      height = 450 - margin.top - margin.bottom;

    // Append the svg object to the body of the page for the heatmap
    const svg = d3.select("#my_dataviz")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom + 100)
      .attr("viewBox", "0 0 1900 800")
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);

    //Read the data for HDB parking
    d3.csv("./data/parking_data.csv").then(function (data) {

      // Labels of row and columns -> unique identifier of the column called 'week' and 'hour'
      const myGroups = Array.from(new Set(data.map(d => d.week)))
      const myVars = Array.from(new Set(data.map(d => d.hour)))

      // Build X scales and axis
      const x = d3.scaleBand()
        .range([0, width])
        .domain(myGroups)
        .padding(0.05);
      svg.append("g")
        .style("font-size", 15)
        .attr("transform", `translate(0, 1)`)
        .call(d3.axisTop(x).tickSize(0))
        .select(".domain").remove()

      // Build Y scales and axis
      const y = d3.scaleBand()
        .range([0, height])
        .domain(myVars)
        .padding(0.05);
      svg.append("g")
        .style("font-size", 15)
        .call(d3.axisLeft(y).tickSize(0))
        .select(".domain").remove()

      // Build color scale
      const myColor = d3.scaleLinear()
        .range(["indigo", "blue", "skyblue"])
        .domain([2000000, 2500000, 3000000])

      // Set the legend for the colorscale
      var legend = d3.legendColor()
        .cells(3)
        .scale(myColor)
        .shapeWidth(585)
        .labels(["High Lot Occupancy", "", "Low Lot Occupancy"])
        .title("Total Available Lots in Singapore: 4,958,636")
        .orient("horizontal");

      svg.append("g")
        .attr("class", "legend")
        .attr("transform", "translate(20,480)")
        .call(legend);

      // Create a tooltip
      const tooltip = d3.select("#my_dataviz")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px")

      // Add the squares
      svg.selectAll()
        .data(data, function (d) { return d.week + ':' + d.hour; })
        .enter()
        .append("rect")
        .attr("x", function (d) { return x(d.week) })
        .attr("y", function (d) { return y(d.hour) })
        .attr("rx", 4)
        .attr("ry", 4)
        .attr("width", x.bandwidth())
        .attr("height", y.bandwidth())
        .style("fill", function (d) { return myColor(d.value) })
        .style("stroke-width", 4)
        .style("stroke", "none")
        .style("opacity", 0.8)
        .on("mouseover", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 2)
            .style("position", "absolute")
            .style("background", "#fff")
            .style("color", "black")
            .html("<b>Total Available Lots: </b>" + d.value + '<br>' + "<b>Percentage of Available Lots: </b>" + d.Percentage
              + '<br>' + "<b>Percentage of Occupied Lots: </b>" + d.occupied)
            .style("left", (event.x - 95) + "px")
            .style("top", (event.y - 105) + "px");

          d3.select(event.currentTarget)
            .style("stroke", "black")
            .style("stroke-width", 2)
            .style("opacity", 2)
            .classed("selected", true);
        })

        .on("mouseout", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 0);

          d3.select(event.currentTarget)
            .style("stroke", "none")
            .style("opacity", 0.8)
            .classed("selected", false);
        })
    })

    // Margins for the line chart
    const marginline = { top: 150, right: 30, bottom: -10, left: 60 },
      widthline = 1500 - marginline.left - marginline.right,
      heighline = 500 - marginline.top - marginline.bottom;

    // Append the svg object to the body of the page for line chart
    const svgline = d3.select("#my_linechart")
      .append("svg")
      .attr("width", widthline + marginline.left + marginline.right)
      .attr("height", heighline + marginline.top + marginline.bottom)
      .attr("viewBox", "0 0 1900 830")
      .append("g")
      .attr("transform", `translate(${marginline.left},${marginline.top})`);

    var lineSvg = svgline.append("g");

    var focus = svgline.append("g")
      .style("display", "none");

    d3.csv("./data/google-trends.csv").then(function (data) {

      // Parse the date / time
      var parseTime = d3.timeParse("%Y-%m-%d");
      // parseTime = moment(parseTime).format("DD-MMM-YYYY");
      var bisectDate = d3.bisector(function (d) { return d.date; }).left;

      // Format the data
      data.forEach(function (d) {
        d.date = parseTime(d.date);
        d.value = +d.value;
        d.value2 = +d.value2;
        // date = d.date
      });

      var x = d3.scaleTime().range([0, width]);
      var y = d3.scaleLinear().range([height, 0]);

      // Define the 1st line
      var valueline = d3.line()
        .x(function (d) { return x(d.date); })
        .y(function (d) { return y(d.value); });

      // Define the 2nd line
      var valueline2 = d3.line()
        .x(function (d) { return x(d.date); })
        .y(function (d) { return y(d.value2); });

      // Scale the range of the data
      x.domain(d3.extent(data, function (d) { return d.date; }));
      y.domain([0, d3.max(data, function (d) {
        return Math.max(d.value, d.value2);
      })]);

      // Handmade legend for line chart
      svgline.append("circle").attr("cx", 1550).attr("cy", 30).attr("r", 10).style("fill", "blue")
      svgline.append("circle").attr("cx", 1550).attr("cy", 70).attr("r", 10).style("fill", "red")
      svgline.append("text").attr("x", 1575).attr("y", 30).text("Flight Search").style("font-size", "20px").attr("alignment-baseline", "middle")
      svgline.append("text").attr("x", 1575).attr("y", 70).text("Hotel Search").style("font-size", "20px").attr("alignment-baseline", "middle")

      // Create a tooltip
      const tooltip = d3.select("#my_linechart")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px");

      // Add the valueline path
      svgline.append("path")
        .datum(data)
        .attr("class", "line")
        .style("stroke", "blue")
        .attr("stroke-width", 2.5)
        .attr("fill-opacity", 0)
        .attr("d", valueline);

      // Add the valueline2 path
      svgline.append("path")
        .datum(data)
        .attr("class", "line")
        .style("stroke", "red")
        .attr("stroke-width", 2.5)
        .attr("fill-opacity", 0)
        .attr("d", valueline2);

      // Add the X Axis
      svgline.append("g")
        .attr("transform", "translate(0," + height + ")")
        .style("font", "10px")
        .call(d3.axisBottom(x));

      // Add the Y Axis
      svgline.append("g")
        .style("font", "10px")
        .call(d3.axisLeft(y));

      svgline.selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("r", 1.5)
        .attr("cx", function (d) { return x(d.date); })
        .attr("cy", function (d) { return y(d.value); })
        .style("stroke-width", 5)
        .style("stroke", "blue")
        .style("opacity", 2)
        .style("fill", "none")
        .style("opacity", 0.8)
        .on("mouseover", (event, d) => {
          d3.select(".tooltip")
            .style("position", "absolute")
            .style("background", "white")
            .style("color", "blue")
            .style("opacity", 2)
            .html("<b>Date: " + moment(d.date).format("DD-MMM-YYYY")
              + '<br>' + "<b>Flight Search: " + d.value)
            .style("left", 200 + "px")
            .style("top", 880 + "px");
        })
        .on("mouseout", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 0);
        });

      svgline.selectAll("dot1")
        .data(data)
        .enter()
        .append("circle")
        .attr("r", 1.5)
        .attr("cx", function (d) { return x(d.date); })
        .attr("cy", function (d) { return y(d.value2); })
        .style("stroke-width", 5)
        .style("stroke", "red")
        .style("opacity", 2)
        .style("fill", "none")
        .style("opacity", 0.8)
        .on("mouseover", (event, d) => {
          d3.select(".tooltip")
            .style("position", "absolute")
            .style("background", "white")
            .style("color", "red")
            .style("opacity", 2)
            .html("<b>Date: " + moment(d.date).format("DD-MMM-YYYY")
              + '<br>' + "Hotel Search: " + d.value2)
            .style("left", 200 + "px")
            .style("top", 880 + "px");
        })
        .on("mouseout", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 0);
        });
    });

    // Bar chart
    var marginbar = { top: 10, right: 30, bottom: -10, left: 30 },
      widthbar = 1350 - marginbar.left - marginbar.right,
      heightbar = 450 - marginbar.top - marginbar.bottom;

    const svgbar = d3.select("#my_barchart")
      .append("svg")
      .attr("width", widthbar + marginbar.left + marginbar.right)
      .attr("height", heightbar + marginbar.top + marginbar.bottom + 100)
      .attr("viewBox", "0 0 1900 480")
      .append("g")
      .attr("transform", `translate(${marginbar.left}, ${marginbar.top})`);

    d3.csv("./data/singapore_GDP.csv").then(function (data) {

      var y = d3.scaleBand()
        .range([0, height])
        .padding(0.1);

      var x = d3.scaleLinear()
        .range([0, width]);

      // Scale the range of the data in the domains
      var min = d3.min(data, function (d) { return d.value });
      var max = d3.max(data, function (d) { return d.value });
      var absMax = Math.max(Math.abs(min), Math.abs(max));
      x.domain([-absMax, absMax]);
      y.domain(data.map(function (d) {
        return d.year;
      }));

      // Create a tooltip
      var Tooltip = d3.select("#my_barchart")
        .data(data)
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px")

      // Append the rectangles for the bar chart
      svgbar.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", function (d) {
          return "bar bar--" + (d.value < 0 ? "negative" : "positive");
        })
        .attr("x", function (d) {
          return x(Math.min(0, d.value));
        })
        .attr("y", function (d) {
          return y(d.year);
        })
        .attr("width", function (d) {
          return Math.abs(x(d.value) - x(0));
        })
        .attr("height", y.bandwidth())
        .on("mouseover", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 2)
            .style("position", "absolute")
            .style("background", "#fff")
            .style("color", "black")
            .html("<b>Year: </b>" + d.year + '<br>' + "<b>Singapore GDP Anuual Growth (%): </b>" + d.value
              + '<br>' + "<b> Singapore's GDP: </b>" + d.value1)
            .style("left", 200 + "px")
            .style("top", 1500 + "px");

          d3.select(event.currentTarget)
            .style("stroke", "black")
            .style("stroke-width", 2)
            .style("opacity", 2)
            .classed("selected", true);
        })

        .on("mouseout", (event, d) => {
          d3.select(".tooltip")
            .style("opacity", 0);

          d3.select(event.currentTarget)
            .style("stroke", "none")
            .classed("selected", false);
        })

      // Add the X Axis
      svgbar.append("g")
        .attr("transform", "translate(0," + height + ")")
        .style("font", "15px")
        .call(d3.axisBottom(x));

      // Add the Y Axis
      let yAxisGroup = svgbar.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + x(0) + ",0)")
        .style("font", "15px")
        .call(d3.axisRight(y));

      yAxisGroup.selectAll('.tick')
        .data(data)
        .select('text')
        .attr('x', function (d, i) { return d.value < 0 ? 9 : -9 })
        .style('text-anchor', function (d, i) { return d.value < 0 ? 'start' : 'end' })
    });

  </script>
</body>

</html>